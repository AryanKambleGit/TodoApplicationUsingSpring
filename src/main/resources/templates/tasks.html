<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Todo Application</title>

</head>

<body th:style="|background-image: url('@{/images/bg.jpg}');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                min-height: 100vh;|">




<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 todo-card">

            <h1 class="text-center mb-4">Todo Application</h1>

            <form th:action="@{/todoApplicationUsingSpring}" method="post" class="d-flex gap-2 mb-4">

                <input type="text" name="task" class="form-control" placeholder="Enter a task" required>

                <input type="date" name="dueDate" class="form-control" style="max-width: 170px;">

                <select name="priority" class="form-select" style="max-width: 140px;">
                    <option value="MEDIUM" selected>MEDIUM</option>
                    <option value="HIGH">HIGH</option>
                    <option value="LOW">LOW</option>
                </select>

                <button type="submit" class="btn btn-primary">Add</button>
            </form>

            <div class="list-group">
                <th:block th:each="task : ${tasks}">
                    <div class="list-group-item d-flex justify-content-between align-items-center">

                        <div class="d-flex flex-column">
                            <!-- Title + strike-through -->
                            <div class="d-flex align-items-center gap-2">
                    <span th:text="${task.title}"
                          th:classappend="${task.completed} ? 'text-decoration-line-through text-muted' : ''">
                        Task Title
                    </span>

                                <!-- Priority Badge -->
                                <span class="badge"
                                      th:text="${task.priority}"
                                      th:classappend="${task.priority.name() == 'HIGH'} ? ' bg-danger' :
                                          (${task.priority.name() == 'MEDIUM'} ? ' bg-warning text-dark' : ' bg-secondary')">
                        MEDIUM
                    </span>
                            </div>

                            <!-- Due Date (only if present) -->
                            <small class="text-muted" th:if="${task.dueDate != null}">
                                Due: <span th:text="${task.dueDate}">2026-02-21</span>
                            </small>
                        </div>

                        <div class="d-flex gap-2">
                            <a th:href="@{/todoApplicationUsingSpring/{id}/toggle(id=${task.id})}"
                               class="btn btn-outline-secondary btn-sm">
                                Toggle
                            </a>

                            <a th:href="@{/todoApplicationUsingSpring/{id}/delete(id=${task.id})}"
                               class="btn btn-outline-danger btn-sm">
                                Delete
                            </a>
                        </div>

                    </div>
                </th:block>
            </div>



        </div>
    </div>
</div>

</body>
</html>
